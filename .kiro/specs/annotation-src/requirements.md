# Src 代码注释补全 — Requirements

## 背景

为提升 mini-vue 源码可读性与维护效率，需要在不改变任何运行时行为的前提下，为 `src` 下的核心逻辑补充中文前置注释，覆盖函数职责、接口/类字段含义、以及关键控制流的意图说明。

本需求以 `.github/prompts/annotation.prompt.md` 为唯一权威规则来源。

## 用户故事（User Stories）

### US-1：读者能快速理解每个模块的职责与边界

作为仓库读者（学习/维护者），
我希望每个模块的关键入口与核心逻辑都有明确的职责和边界说明，
以便我能在较少跳转的情况下把握整体数据流。

**验收标准（EARS）**

- WHEN 我打开任意 `src/**` 下的核心文件
  THE SYSTEM SHALL 在关键函数/类型/类声明上方提供中文职责注释。
- WHEN 代码存在「必须推理才能理解」的分支/循环/策略块
  THE SYSTEM SHALL 在该代码块之前提供解释意图与策略的前置注释。

### US-2：接口与类字段含义清晰

作为使用/扩展框架实现的维护者，
我希望 interface 与类属性都附带含义说明，
以降低误用字段导致的行为偏差。

**验收标准（EARS）**

- WHEN 存在 interface 声明
  THE SYSTEM SHALL 为 interface 本身与每个属性添加中文前置注释。
- WHEN 存在类属性（含 static/getter/setter）
  THE SYSTEM SHALL 为每个属性添加中文前置注释，说明其作用与依赖关系。

### US-3：注释一致且不干扰代码结构

作为代码评审者，
我希望新增注释遵循统一规则，且不会引入噪音式改动，
以便 review 能聚焦在注释准确性上。

**验收标准（EARS）**

- WHEN 添加注释
  THE SYSTEM SHALL 仅使用前置注释（禁止行尾注释），且注释语言为中文。
- WHEN 文件已有准确注释
  THE SYSTEM SHALL 不重复添加；若注释不准确可修正。
- WHEN 进行注释补全
  THE SYSTEM SHALL 不改变任何业务逻辑、函数签名或执行路径，并尽量保持原有空行结构。

## 约束（Constraints）

- 只允许修改「任务中显式点名」的文件；未点名文件不得改动。
- 每个目录任务开始前必须先读取仓库既有注释示例文件（至少 `src/runtime-core/create-app.ts`、`src/runtime-core/renderer.ts`）。
- 不要求对每一行写注释，但任何需要读者思考才能理解的语句块必须有前置注释；缺失任意一处视为任务失败。

## 非目标（Non-goals）

- 不进行任何重构、性能优化或行为修复。
- 不新增功能、不调整对外 API、不变更导入路径风格。
- 不要求为简单常量/导入语句补注释。
- 不在本 spec 中规定必须跑全量测试（可按目录选择相关测试）。
